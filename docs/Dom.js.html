<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Dom.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: Dom.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
    @file Dom
    &lt;a href="../test.html">Demo&lt;/a>
    @author Daniel Tan
    @example
    // returns div element with an id of testID
    Dom.create("div", testID);
*/

/** By default Dom is already instantiated
    @constructor
*/
function Dom() {
    var doc = document;
    /** list of tags
        @property {String} DIV - "DIV"
        @property {String} INPUT - "INPUT"
    */
    this.type = {
        DIV:"DIV",
        INPUT:"INPUT",
        UL:"UL",
        LI:"LI"
    };
    /** creates a dom element
        @param {String} type - name of element
        @param {String} id - id of element
        @returns a dom element
    */
    this.create = function(type, id) {
        var e = doc.createElement(type);
        if(id)
                e.id = id;
        return e;
    }
    /** use to get the element by using its id, tag or class
        @param {String} id - can be id, tag or class
        @returns an element or mulitiple element
        
        @example
        // returns a normal dom element
        Dom.el("testID") // get element by id
        // returns an object with functions
        Dom.el("#testID") // get element by id
        // returns an object with functions
        Dom.el(".test-class") // get element by class name
        // returns an object with functions
        Dom.el("DIV") // get element by tag
        // returns an object with functions
        Dom.el(".test-class DIV") // get element by class and tag
    */
    this.el = function(id) {
        var d;
        var ids = id.split(" ");
        var loopCount = 0;
        var loopMax = ids.length;
        function loopSearch(splitID, parents) {
            var key = splitID.substring(0, 1);
            var actualID;
            switch(key) {
                case "#":
                    actualID = splitID.substring(1, id.length);
                    d = searchID(actualID);
                break;
                case ".":
                    actualID = splitID.substring(1, id.length);
                    d = searchClass(actualID, parents);
                break;
                default:
                    d = doc.getElementById(splitID);
                    if(d == undefined) {
                        d = searchTag(splitID, parents);
                    }
                    
                    
                break;
            }
            if(loopCount &lt; loopMax - 1) {
                loopCount++;
                loopSearch(ids[loopCount], d._dom());
            }
        }
        loopSearch(ids[0]);
        return d;
    }
    /** add a class to an element
        @param {dom} target - dom target
        @param {String} className - name of the class
    */
    this.addClass = function(target, className) {
        var newClass;
		if(target.className == "") {
            newClass = className;
        } else {
            newClass = target.className + " " + className;   
        }
        target.setAttribute("class", newClass);
        target.setAttribute("className", newClass);
	}
    /** remove a class to an element
        @param {dom} target - dom target
        @param {String} className - name of the class
    */
	this.removeClass = function(target, className) {
        var classNames = target.className.split(" ");
        var newClass = "";
        for( var i = 0; i &lt; classNames.length; ++i) {
            if(className != classNames[i]) {
                newClass += (i == 0) ? classNames[i] : " " + classNames[i];
            }
        }
		target.className = newClass;
	}
    function searchID(id, parent) {
        parent = (parent == undefined) ? doc : parent;
        var d = parent.getElementById(id);
        
        var data = {
            _dom:function() {
                return d;
            },
            css:function(css) {
                Css.apply(d, css);
                return searchID(key);
            },
            set:function(key, val) {
                if(typeof val == "function") {
                    d[key] = function() {
                        val.call(data);
                    };
                } else {
                    d[key] = val;
                }
                
                return searchID(key);
            },
            animate:function(duration, to, delta) {
                Animate.to(d, duration, to, delta);
                
            }
        };
        return data;
    }
    function searchClass(id, parents) {
        parents = (parents == undefined) ? [doc.body] : parents;
        var list = [];
        function loopSearch(dom, id) {
            for(var i = 0; i &lt; dom.childNodes.length; ++i) {
                var child = dom.childNodes[i];
                if(child.nodeName == "#text")
                    continue;
                
                if(child.className.split(" ").indexOf(id) > -1) {
                    // found
                    list.push(child);
                } else {
                    if(child.childNodes.length > 0) {
                        loopSearch(child, id);
                    }
                }
            }
        }
        for(var i = 0; i &lt; parents.length; ++i) {
            loopSearch(parents[i], id)
        }
        var data = {
            _dom:function() {
                return list;
            },
            css:function(css) {
                for(var i = 0; i &lt; list.length; ++i) {
                    Css.apply(list[i], css);
                }
                return searchClass(id);
            },
            set:function(key, val) {
                for(var i = 0; i &lt; list.length; ++i) {
                    if(typeof val == "function") {
                         list[i][key] = function() {
                            val.call(data);
                         };
                    } else {
                        list[i][key] = val;
                    }
                }
                return searchClass(id);
            },
            animate:function(duration, to, delta) {
                for(var i = 0; i &lt; list.length; ++i) {
                    Animate.to(list[i], duration, to, delta);
                }
                
            }
        };
        return data;
    }
    function searchTag(tag, parents) {
        parents = (parents == undefined) ? [doc.body] : parents;
        var list = [];
        for(var i = 0; i &lt; parents.length; ++i) {
            var tagList = parents[i].getElementsByTagName(tag);
            for(var j = 0; j &lt; tagList.length; ++j) {
                list.push(tagList[j]);                
            }
        }
        var data = {
            _dom:function() {
                return list;
            },
            css:function(css) {
                for(var i = 0; i &lt; list.length; ++i) {
                    Css.apply(list[i], css);
                }
                return searchTag(tag);
            },
            set:function(key, val) {
                for(var i = 0; i &lt; list.length; ++i) {
                    if(typeof val == "function") {
                         list[i][key] = function() {
                            val.call(data);
                         };
                    } else {
                        list[i][key] = val;
                    }
                }
                return searchTag(tag);
            },
            animate:function(duration, to, delta) {
                for(var i = 0; i &lt; list.length; ++i) {
                    Animate.to(list[i], duration, to, delta);
                }
            }
        };
        if(list.length == 0)
            data = undefined;
        return data;
    }
}
window.Dom = new Dom();

/** By default Css is already instantiated
    @constructor
    @example
    // returns apply the css object rules
    Css.apply(dom, { width:"100px"});
*/
function Css() {
    var rules = {};
    /** save a rule object
        @param {String} name - name/class rule
        @param {Object} css - rule object
    */
    this.rule = function(name, css) {
            rules[name] = css;
    }
    /** apply a rule/css object
        @param {dom} dom - dom element
        @param {Object} css - rule object
        @returns the dom element
    */
    this.apply = function(dom, css) {
                if(rules[css])
                    css = rules[css];
                for(var attrib in css) {
                    dom.style[attrib] = css[attrib];
                }
                return dom;
        }
}
window.Css = new Css();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AutoComplete.html">AutoComplete</a></li><li><a href="Content.html">Content</a></li><li><a href="Css.html">Css</a></li><li><a href="Dom.html">Dom</a></li><li><a href="EventDispatcher.html">EventDispatcher</a></li><li><a href="Require.html">Require</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ContentEvent">ContentEvent</a></li><li><a href="global.html#NuEvent">NuEvent</a></li><li><a href="global.html#script">script</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Fri May 17 2013 18:49:11 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
